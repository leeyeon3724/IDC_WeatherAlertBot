# BACKLOG

이 문서는 코드베이스 평가와 리팩토링 우선순위를 단일 기준으로 관리합니다.
기준 브랜치: `main`
평가일: `2026-02-21`

## 1) Current Assessment

| 관점 | 점수(5점) | 평가 |
|---|---:|---|
| 정확성 | 4.6 | 핵심 알림/중복 방지/헬스 흐름이 안정적이고 Weather API 경계 테스트가 강화됨 |
| 가독성/복잡성 | 4.4 | 엔트리포인트 분리와 설정 파서 분해로 변경 영향 범위가 감소함 |
| 테스트 가능성 | 4.7 | 핵심 경로(`service_loop`, `commands`, `weather_api`, 상태 저장소) 회귀 탐지력이 높음 |
| 안정성 | 4.5 | 실패 이벤트 표준화와 상태 저장소 실패 분기 가드로 운영 복원력이 향상됨 |
| 보안 | 4.4 | redaction 단위+통합 시나리오 검증으로 민감정보 로그 노출 리스크를 낮춤 |
| 성능 | 4.7 | SQLite 배치 회귀 가드 + CI 경량 perf 리포트/기준선으로 성능 추세 관측 기반 확보 |
| 일관성 | 4.7 | `events.py`-`EVENTS.md`-`OPERATION.md` 정합성 점검 자동화로 문서 누락 리스크 감소 |
| 기술부채 | 4.8 | 기존 핵심 부채(RB-101~RB-505)가 대부분 해소되고 운영 고도화 단계로 진입 |
| 배포 신뢰성 (신규) | 4.1 | CI 품질 게이트는 강하지만 배포 전 최종 검증(환경 매트릭스/부트 체크)이 제한적 |
| 운영 비용 효율성 (신규) | 3.9 | 성능 지표는 있으나 API 호출량/알림량의 비용 관점 가시성이 부족함 |
| 감사 가능성/추적성 (신규) | 4.0 | 이벤트 체계는 정리됐으나 스키마 변경 이력과 버전 관리 체계가 미약함 |
| 변경 리드타임 (신규) | 4.2 | 자동 점검은 늘었지만 “한 번에 검증/릴리스 판단” 흐름은 더 단순화 여지 존재 |
| 아키텍처 규율 (추가) | 4.5 | 계층 의존성 규칙 자동검사로 구조 역참조를 CI에서 즉시 차단 가능 |
| 릴리스 게이트 단일화 (추가) | 4.5 | `make gate` 도입으로 로컬/CI 품질 검증 진입점이 단순화됨 |
| 계약 안정성 (추가) | 4.0 | 이벤트/설정/CLI 계약 호환성을 장기적으로 보장할 테스트 계층이 약함 |
| 코드 수명주기 위생 (추가) | 3.8 | 미사용 코드/설정/문서 정리를 정기적으로 강제하는 루틴이 부재 |

## 2) Evidence Snapshot

- 품질 게이트: `ruff`, `mypy`, `scripts.check_event_docs_sync`, `pytest --cov` 통과
- 테스트/커버리지: `131 passed`, 총 커버리지 `92.64%`
- 대표 커버리지: `service_loop 98%`, `commands 94%`, `weather_api 99%`, `settings 90%`

## 3) Active Backlog

| ID | Priority | 상태 | 근거 관점 | 작업 | 완료조건(DoD) |
|---|---|---|---|---|---|
| RB-506 | P3 | 예정 | 성능/운영 비용 효율성 | perf 비교 결과를 추세 시각화(markdown chart)로 축적 | 리포트 누적 규칙 + 시각화 포맷 정의 |
| RB-507 | P3 | 예정 | 성능/운영 비용 효율성 | 성능 리포트 보존 기간/샘플 정책(예: 최근 20회) 표준화 | CI/운영 문서에 보존 정책 명시 |
| RB-601 | P1 | 예정 | 배포 신뢰성 | CI에 Python 3.11/3.12 최소 실행 검증 매트릭스 도입(핵심 smoke + startup check) | 버전별 smoke 통과 결과를 요약/아티팩트로 확인 가능 |
| RB-602 | P2 | 예정 | 감사 가능성/추적성 | 이벤트 스키마 버전(`EVENT_SCHEMA_VERSION`)과 변경 로그 정책 수립 | 이벤트 호환성 변경 시 버전/변경기록이 문서와 함께 업데이트 |
| RB-603 | P2 | 예정 | 운영 비용 효율성 | 사이클당 API 호출량/전송량 지표 이벤트 추가 및 대시보드 기준 정의 | 운영에서 과호출/과전송 이상 징후를 이벤트 기반으로 탐지 가능 |
| RB-605 | P3 | 예정 | 배포 신뢰성/감사 가능성 | PR 템플릿 체크 항목을 CI에서 부분 강제(예: 이벤트 변경 시 문서 동기화 확인) | 템플릿 누락과 실제 검증 결과 간 괴리 감소 |
| RB-702 | P1 | 예정 | 계약 안정성 (추가) | 이벤트/설정/CLI 계약 테스트(스키마/스냅샷) 계층 도입 | 호환성 깨짐이 테스트에서 명시적으로 검출 |
| RB-703 | P2 | 예정 | 코드 수명주기 위생 (추가) | 미사용 코드/설정/문서 정리 루틴(정적검사+체크리스트) 도입 | 정리 리포트가 주기적으로 생성되고 문서에 반영 |

## 4) Completed (Compact)

| 구간 | 완료 범위 | 핵심 성과 |
|---|---|---|
| Foundation Wave | RB-101~RB-208 | URL 정책 분리, 저장소 안정화, CLI 실패 경로 표준화, 운영 문서 기반 확립 |
| Reliability Wave | RB-301~RB-407 | 도메인/저장소/루프 테스트 강화, 구조화 이벤트/운영 매핑 정착 |
| CI & Governance Wave | RB-501~RB-505 | 정책 시나리오 테스트, perf 리포트/기준선, 문서 정합성 검사, PR 체크리스트 도입 |
| Release Gate Wave | RB-604 | `make gate` 단일 검증 진입점 도입 및 CI 게이트 정렬 |
| Architecture Guard Wave | RB-701 | 계층 의존성 규칙 자동검사 및 회귀 테스트 도입 |

## 5) Maintenance Rules

- 변경 단위별 품질 게이트(`ruff`, `mypy`, `scripts.check_architecture_rules`, `scripts.check_event_docs_sync`, `pytest`) 통과 후 병합
- 기능 변경은 작은 커밋 단위로 분리하고, 각 단위에서 백로그 상태를 함께 갱신
- 문서 경계는 `README/SETUP/OPERATION/TESTING/EVENTS/BACKLOG`로 고정
